<footer>
    <p class="other-links">
        <label>
            <a href="/categories">Categories of Blog</a>
        </label>
        <label>
            <a href="/tags">Tags of Blog</a>
        </label>
    </p>
    <p class="other-links">
        {{ with .Site.Params.linkedin }}
        <label>
            <a href="{{ . }}" rel="noopener">LinkedIn</a>
        </label>
        {{ end }}
        {{ with .Site.Params.github }}
        <label>
            <a href="{{ . }}" rel="noopener">Github</a>
        </label>
        {{ end }}
        {{ with .Site.Params.twitter }}
        <label>
            <a href="{{ . }}" rel="noopener">Twitter</a>
        </label>
        {{ end }}
        {{ with .Site.Params.addtional_urls }}
            {{ range . }}
                <label>
                    <a href="{{ .url }}" rel="noopener">{{ .name }}</a>
                </label>
            {{ end }}
        {{ end }}
    </p>
    <p>Subscribe via <a href="/index.xml">RSS</a>!</p>
    <p>
        Made by {{ .Site.Params.Author }}. Powered by
        <a href="https://gohugo.io/">Hugo</a>.
    </p>
</footer>

{{ if .Site.Params.service_worker }}
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker
                .register("{{ .Site.Params.service_worker }}")
                .then(registration => {
                    console.log("service worker registered!");
                })
                .catch(err => console.error("SW failure...  :(", err));
        }
    </script>
{{ end }}

{{ if .Site.Params.downloader }}

<script>
    const trash = document.querySelector(".trash");
    const download = document.querySelector(".download");

    trash.style.display = "none";
    download.style.display = "none";

    // refer to /sw.js for cache name.
    const APP_CACHE = caches.open("blog_cache");

    download.addEventListener("click", evt => {
        APP_CACHE.then(cache => {
            cache.add(window.location.pathname);
            trash.style.display = "block";
            download.style.display = "none";
        });
    });

    trash.addEventListener("click", evt => {
        APP_CACHE.then(cache => {
            const CACHE_KEYS = cache.keys();
            CACHE_KEYS.then(keyList => {
                const itemToDelete = keyList.find(key => key.url === window.location.href);
                cache.delete(itemToDelete);
                trash.style.display = "none";
                download.style.display = "block";
            });
        });
    });

    APP_CACHE.then(cache => {
        const CACHE_KEYS = cache.keys();
        CACHE_KEYS.then(keyList => {
            const existPageInCache = keyList.find(key => key.url === window.location.href);

            if (existPageInCache) {
                trash.style.display = "block";
            } else {
                download.style.display = "block";
            }
        });
    });
</script> 

{{ end }}


<!-- JS -->
<script src="{{ .Site.BaseURL }}js/instant.js"></script>

<!-- custom js -->
{{ range .Site.Params.custom_js -}}
    <script src="{{ . | absURL }}"></script>
{{- end }}

